<div style="margin-left: 10px; margin-right: 10px; margin-top: 55px;">
  <tabset #staticTabs>
    <tab customClass="tab-shng" heading="{{ 'LOGICS.USERLOGICS'|translate }}">
      <div style="margin-left: 10px; margin-right: 10px;">
        <p></p>
        <table id="1" class="table table-striped table-hover">
        <thead>
        <tr class="shng_heading">
          <th style="width: 30px; border-top:0;"></th>
          <th class="p-1" style="width: 320px; border-top: 0;">{{ 'LOGICS.LOGIC'|translate }}</th>
          <th class="p-1" style="width: 220px; border-top: 0;">{{ 'LOGICS.NEXT_EXEC'|translate }}</th>
          <th class="p-1" style="width: 70px;  border-top: 0;">{{ 'LOGICS.CYCLE'|translate }}</th>
          <th class="p-1" style="width: 150px; border-top: 0;">{{ 'LOGICS.CRONTAB'|translate }}</th>
          <th class="p-1" style="width: 120px; border-top: 0;">{{ 'LOGICS.WATCH_ITEMS'|translate }}</th>
          <th class="p-1" style="width: 250px; border-top: 0;">{{ 'LOGICS.FILENAME'|translate }}</th>
          <th class="p-1" style="width: 260px; border-top: 0;">{{ 'LOGICS.ACTIONS'|translate }}</th>
        </tr>
        </thead>
        <tbody>
        <ng-container *ngIf="userlogics?.length > 0">
          <ng-container *ngFor="let logic of userlogics">
            <ng-container *ngIf="logic.userlogic === true">
              <tr>
                <ng-container *ngIf="logic.enabled === true, then logicEnabled; else logicDisabled"></ng-container>
                <ng-template #logicEnabled>
                  <td class="p-1 pl-2"><span style="color: var(--shng-green);" class="fas fa-play-circle"></span></td>
                  <td class="p-1">{{ logic.name }}</td>
                  <td class="p-1">{{ logic.next_exec }}</td>
                  <td class="p-1">{{ logic.cycle }}</td>
                  <td class="p-1">{{ logic.crontab }}</td>
                </ng-template>
                <ng-template #logicDisabled>
                  <td class="p-1 pl-2"><span style="color: var(--shng-red)" class="fas fa-pause-circle"></span></td>
                  <td class="p-1">{{ logic.name }}</td>
                  <td class="p-1" style="color: var(--shng-disabled)">{{ logic.next_exec }}</td>
                  <td class="p-1" style="color: var(--shng-disabled)">{{ logic.cycle }}</td>
                  <td class="p-1" style="color: var(--shng-disabled)">{{ logic.crontab }}</td>
                </ng-template>

                <ng-container *ngIf="logic.watch_item_list?.length > 0">
                  <td style="cursor: pointer;" (click)="details.show()">
                    <ng-container *ngIf="logic.enabled; then watchItemSizeEnabled; else watchItemSizeDisabled"></ng-container>
                      <ng-template #watchItemSizeEnabled>
                        <span>
                          {{ logic.watch_item_list?.length }}
                          <span class="fas fa-search"></span>
                        </span>
                      </ng-template>
                      <ng-template #watchItemSizeDisabled>
                        <span style="color:var(--shng-disabled);">
                          {{ logic.watch_item_list?.length }}
                          <span class="fas fa-search" style="color: var(--shng-disabled);"></span>
                        </span>
                      </ng-template>
                  </td>
                </ng-container>
                <ng-container *ngIf="logic.watch_item_list?.length === 0">
                  <td class="p-1">-</td>
                </ng-container>

                <td class="p-1">
                  <ng-container *ngIf="logic.logictype === 'Blockly'; then blocklyLink; else noBlocklyLink">
                  </ng-container>
                  <ng-template #blocklyLink></ng-template>
                  <ng-template #noBlocklyLink>
                    <a class="text-shng" href="logics_view.html?file_path={{ logic.pathname }}&logicname={{ logic.name }}">{{ logic.filename }}</a>
                  </ng-template>
                </td>
                <td class="p-1">
                  <ng-container *ngIf="logic.enabled; then logicEnabledActions; else logicDisabledActions"></ng-container>
                    <ng-template #logicEnabledActions>
                      <button name="trigger" title="{{ 'LOGICS.TRIGGER'|translate }}" class="btn btn-outline-dark btn-sm mr-1"><i class="fas fa-hand-pointer"></i></button>
                      <button name="reload"  title="{{ 'LOGICS.RELOAD'|translate }}" class="btn btn-outline-dark btn-sm mr-1"><i class="fas fa-sync"></i></button>
                      <button name="disable" title="{{ 'LOGICS.DISABLE'|translate }}" class="btn btn-outline-dark btn-sm mr-1"><i class="fas fa-pause"></i></button>
                    </ng-template>
                    <ng-template #logicDisabledActions>
                      <button disabled="true" name="trigger" title="{{ 'LOGICS.TRIGGER'|translate }}" class="btn btn-outline-dark btn-sm mr-1"><i class="fas fa-hand-pointer"></i></button>
                      <button name="reload"  title="{{ 'LOGICS.RELOAD'|translate }}" class="btn btn-outline-dark btn-sm mr-1"><i class="fas fa-sync"></i></button>
                      <button name="enable"  title="{{ 'LOGICS.ENABLE'|translate }}" class="btn btn-outline-dark btn-sm mr-1"><i class="fas fa-play"></i></button>
                    </ng-template>
                    <button name="unload" title="{{ 'LOGICS.UNLOAD'|translate }}" class="btn btn-outline-dark btn-sm mr-1"><i class="fas fa-eject"></i></button>
                    <button name="delete" title="{{ 'LOGICS.DELETE'|translate }}" class="btn btn-outline-danger btn-sm"><i class="far fa-trash-alt" aria-hidden="true" style="color: var(--shng-red);"></i></button>
                </td>
              </tr>
              <div bsModal #details="bs-modal" class="modal fade" tabindex="1" role="dialog" aria-labelledby="dialog-sizes-name2">
                <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 id="dialog-sizes-name2" class="modal-title pull-left">
                        {{ 'LOGICS.WATCH_ITEMS'|translate }}
                      </h5>
                      <button type="button" class="close pull-right" aria-label="Close" (click)="details.hide()">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div class="card" style="margin-bottom: 5px;">
                        <div class="card-body p-1">
                          <ng-container *ngFor="let watch_item of logic.watch_item_list">
                          <div class="item-box m-1 p-1">{{ watch_item }}</div>
                          </ng-container>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
          </ng-container>
        </ng-container>
        <ng-container *ngIf="userlogics?.length == 0">
          <tr><td colspan="8">{{ 'LOGICS.NO_DATA'|translate }}</td></tr>
        </ng-container>

        <ng-container *ngIf="newlogics?.length >0">
          <tr><th colspan="8">{{ 'LOGICS.NEW_LOGICS'|translate }}</th><tr>
        </ng-container>
        <ng-container *ngFor="let logic of newlogics">
          <ng-container *ngIf="logic.userlogic === true">
            <tr>
              <td class="p-1 pl-2">
                <ng-container *ngIf="logic.enabled === true, then logicEnabled; else logicDisabled"></ng-container>
                <ng-template #logicEnabled>
                  <span style="color: var(--shng-green);" class="fas fa-play-circle"></span>
                </ng-template>
                <ng-template #logicDisabled>
                  <span style="color: var(--shng-red)" class="fas fa-pause-circle"></span>
                </ng-template>
              </td>
              <td class="p-1">{{ logic.name }}</td>
              <td class="p-1"></td>
              <td class="p-1"></td>
              <td class="p-1"></td>
              <td class="p-1"></td>
              <td class="p-1">
                <ng-container *ngIf="logic.logictype === 'Blockly'; then blocklyLink; else noBlocklyLink">
                </ng-container>
                <ng-template #blocklyLink></ng-template>
                <ng-template #noBlocklyLink>
                  <a class="text-shng" href="logics_view.html?file_path={{ logic.pathname }}&logicname={{ logic.name }}">{{ logic.filename }}</a>
                </ng-template>
              </td>
              <td class="p-1">
                <ng-container *ngIf="logic.filename != ''">
                  <button name="add" title="{{ 'LOGICS.ADD'|translate }}" type="submit" class="btn btn-outline-dark btn-sm mr-1"><i class="fas fa-plus"></i></button>
                </ng-container>
                <button name="delete" title="{{ 'LOGICS.DELETE'|translate }}" class="btn btn-outline-danger btn-sm"><i class="far fa-trash-alt" aria-hidden="true" style="color: var(--shng-red);"></i></button>
              </td>
            </tr>
          </ng-container>
        </ng-container>
        </tbody>
      </table>
      </div>
    </tab>

    <tab customClass="tab-shng" heading="{{ 'LOGICS.SYSTEMLOGICS'|translate }}">
      <div style="margin-left: 10px; margin-right: 10px;">
        <p></p>
        <table id="2" class="table table-striped table-hover">
          <thead>
          <tr class="shng_heading">
            <th style="width: 30px; border-top: 0"></th>
            <th class="p-1" style="width: 150px; border-top: 0">{{ 'LOGICS.LOGIC'|translate }}</th>
            <th class="p-1" style="width: 200px; border-top: 0">{{ 'LOGICS.NEXT_EXEC'|translate }}</th>
            <th class="p-1" style="width: 250px; border-top: 0">{{ 'LOGICS.CYCLE'|translate }}</th>
            <th class="p-1" style="width: 160px; border-top: 0">{{ 'LOGICS.CRONTAB'|translate }}</th>
            <th class="p-1" style="width: 150px; border-top: 0">{{ 'LOGICS.WATCH_ITEMS'|translate }}</th>
            <th class="p-1" style="width: 120px; border-top: 0">{{ 'LOGICS.FILENAME'|translate }}</th>
            <th class="p-1" style="width: 40px;  border-top: 0;" >{{ 'LOGICS.ACTIONS'|translate }}</th>
          </tr>
          </thead>
          <tbody>
          <ng-container *ngIf="systemlogics?.length > 0">
            <ng-container *ngFor="let logic of systemlogics">
              <ng-container *ngIf="logic.userlogic === false">
                <tr>
                  <td class="p-1 pl-2">
                    <ng-container *ngIf="logic.enabled === true, then logicEnabled; else logicDisabled"></ng-container>
                    <ng-template #logicEnabled>
                      <span style="color: green;" class="fas fa-play-circle"></span>
                    </ng-template>
                    <ng-template #logicDisabled>
                      <span style="color: red" class="fas fa-pause-circle"></span>
                    </ng-template>
                  </td>
                  <td class="p-1">{{ logic.name }}</td>
                  <td class="p-1">{{ logic.next_exec }}</td>
                  <td class="p-1">{{ logic.cycle }}</td>
                  <td class="p-1">{{ logic.crontab }}</td>
                  <td class="p-1"></td>
                  <td class="p-1">{{ logic.filename }}</td>
                  <td></td>
                </tr>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="systemlogics?.length == 0">
            <tr><td colspan="8">{{ 'LOGICS.NO_DATA'|translate }}</td></tr>
          </ng-container>
          </tbody>
        </table>
      </div>
    </tab>
  </tabset>
</div>
